<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MD KAHMI BOLSEL - (Admin Enabled)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{--primary:#0a4d2e;--light:#f8f9fa;--text:#222}
    body{font-family:Poppins, sans-serif;color:var(--text);margin:0}
    .navbar{background:var(--primary);color:#fff;padding:12px 20px;position:fixed;width:100%;top:0;z-index:10}
    .nav-container{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
    .logo{display:flex;align-items:center;gap:10px}
    .hero{height:60vh;background:linear-gradient(rgba(0,0,0,.45),rgba(0,0,0,.45)),url('111.png') center/cover;color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding-top:60px}
    .container{max-width:1100px;margin:0 auto;padding:30px}
    .section-title h2{color:var(--primary)}
    /* News cards */
    .news-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
    .news-card{background:#fff;padding:0;border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .news-image img{width:100%;height:180px;object-fit:cover}
    .news-content{padding:16px}
    .member-card{background:#fff;padding:16px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,.06);display:flex;gap:12px;align-items:center}
    .member-image{background:var(--primary);color:#fff;border-radius:50%;height:60px;width:60px;display:flex;align-items:center;justify-content:center}
    /* Admin */
    .admin-btn{position:fixed;right:20px;bottom:20px;background:var(--primary);color:#fff;padding:12px 16px;border-radius:8px;cursor:pointer;z-index:999}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.show{display:flex}
    .modal-card{background:#fff;padding:20px;border-radius:8px;max-width:800px;width:100%;max-height:90vh;overflow:auto}
    .form-row{display:flex;gap:10px;margin-bottom:10px}
    .form-row input,.form-row textarea,select{flex:1;padding:8px;border:1px solid #ddd;border-radius:6px}
    .btn{background:var(--primary);color:#fff;padding:8px 12px;border-radius:6px;border:none;cursor:pointer}
    .danger{background:#c0392b}
    footer{background:#111;color:#ddd;padding:24px;text-align:center;margin-top:40px}
    a.icon{color:var(--primary);text-decoration:none}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo"><img src="MD KAHMI LOGO.png" alt="logo" style="height:36px"/><strong>MD KAHMI BOLSEL</strong></div>
      <div>
        <a href="#news" style="color:#fff;margin-right:12px">Berita</a>
        <a href="#members" style="color:#fff">Pengurus</a>
      </div>
    </div>
  </nav>

  <section class="hero">
    <h1>MD KAHMI BOLSEL</h1>
    <p>"Yakin Usaha Sampai"</p>
  </section>

  <main class="container">
    <section id="news-section">
      <div class="section-title"><h2>Berita Terbaru</h2></div>
      <div id="newsCards" class="news-cards">
        <!-- news cards will be rendered here by JS -->
      </div>
    </section>

    <hr style="margin:30px 0">

    <section id="members">
      <div class="section-title"><h2>Pengurus Majelis Daerah</h2></div>
      <div id="membersList" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-top:12px">
        <!-- member cards rendered by JS -->
      </div>
    </section>
  </main>

  <button id="adminBtn" class="admin-btn"><i class="fas fa-user-cog"></i> Admin</button>

  <!-- Modal (used for login and admin panel) -->
  <div id="modal" class="modal">
    <div class="modal-card" id="modalCard">
      <!-- content injected by JS -->
    </div>
  </div>

  <footer>
    &copy; MD KAHMI BOLSEL
  </footer>

  <script>
    /*****************************************************************
     * Simple client-side admin for static site
     * - Credentials are the ones you provided (stored in JS)
     * - News & member data stored in localStorage so admin can edit on-site
     * Notes: This is a frontend-only solution (no server). If you want
     * edits to persist across devices or users, you should deploy with
     * a small backend (or use Firebase / Netlify CMS). For now edits
     * persist in the browser where admin logs in.
     *****************************************************************/

    const ADMIN_ID = 'kahmibolsel123';
    const ADMIN_PW = 'kahmibolsel234';
    const LS_NEWS_KEY = 'kahmi_news_v1';
    const LS_MEM_KEY = 'kahmi_members_v1';
    const LS_SESSION = 'kahmi_admin_logged_v1';

    // default news (uses text from your uploaded file as fallback)
    const defaultNews = [
      {
        id: cryptoRandomId(),
        date: '25 Oktober 2025',
        title: 'Pelantikan Pengurus MD KAHMI BOLSEL Periode 2025-2030',
        excerpt: 'Musyawarah Daerah (Musda) Majelis Daerah (MD) Korps Alumni Himpunan Mahasiswa Islam (KAHMI) Kabupaten Bolaang Mongondow Selatan (Bolsel) berlangsung sukses...',
        image: '111.png'
      },
      {
        id: cryptoRandomId(),
        date: '25 Oktober 2025',
        title: 'Penyerahan Sembako Gratis Kepada Masyarakat',
        excerpt: 'Majelis Daerah (MD) KAHMI BOLSEL menyalurkan bantuan sembako kepada masyarakat sekitar sebagai bentuk dukungan...',
        image: 'IMG_7101-1-1536x1152.jpeg'
      }
    ];

    // default members (extracted examples from your file)
    const defaultMembers = [
      {id: cryptoRandomId(), name: 'Abidin Patilima', role: 'Presidium', email:'', phone:''},
      {id: cryptoRandomId(), name: 'Fauzi Makkah', role: 'Presidium', email:'', phone:''},
      {id: cryptoRandomId(), name: 'Arthur Waroka', role: 'Presidium', email:'', phone:''},
      {id: cryptoRandomId(), name: 'Kasman Djauhari', role: 'Presidium', email:'', phone:''},
      {id: cryptoRandomId(), name: 'Eus Daud', role: 'Koordinator Presidium', email:'', phone:''}
    ];

    // ---------- helpers ----------
    function cryptoRandomId(){ return 'id_'+Math.random().toString(36).slice(2,9); }
    function $(sel){ return document.querySelector(sel) }
    function $all(sel){ return Array.from(document.querySelectorAll(sel)) }

    // load or initialize storage
    function loadNews(){
      const raw = localStorage.getItem(LS_NEWS_KEY);
      if(!raw){ localStorage.setItem(LS_NEWS_KEY, JSON.stringify(defaultNews)); return defaultNews; }
      try{ return JSON.parse(raw) }catch(e){ localStorage.setItem(LS_NEWS_KEY, JSON.stringify(defaultNews)); return defaultNews }
    }
    function saveNews(arr){ localStorage.setItem(LS_NEWS_KEY, JSON.stringify(arr)); renderNews(); }

    function loadMembers(){
      const raw = localStorage.getItem(LS_MEM_KEY);
      if(!raw){ localStorage.setItem(LS_MEM_KEY, JSON.stringify(defaultMembers)); return defaultMembers; }
      try{ return JSON.parse(raw) }catch(e){ localStorage.setItem(LS_MEM_KEY, JSON.stringify(defaultMembers)); return defaultMembers }
    }
    function saveMembers(arr){ localStorage.setItem(LS_MEM_KEY, JSON.stringify(arr)); renderMembers(); }

    // ---------- rendering ----------
    function renderNews(){
      const list = loadNews();
      const container = $('#newsCards'); container.innerHTML='';
      list.forEach(n=>{
        const card = document.createElement('article'); card.className='news-card';
        card.innerHTML = `
          <div class="news-image"><img src="${n.image||'111.png'}" alt="${escapeHtml(n.title)}"></div>
          <div class="news-content">
            <div style="color:var(--primary);font-size:0.9rem;margin-bottom:6px">${escapeHtml(n.date||'')}</div>
            <h3 style="margin:0 0 8px">${escapeHtml(n.title)}</h3>
            <p style="color:#666">${escapeHtml(n.excerpt)}</p>
            ${isAdmin() ? `<div style="margin-top:10px"><button class="btn" onclick="openEditNews('${n.id}')">Edit</button> <button class="btn danger" onclick="deleteNews('${n.id}')">Hapus</button></div>` : ''}
          </div>`;
        container.appendChild(card);
      })
    }

    function renderMembers(){
      const list = loadMembers();
      const container = $('#membersList'); container.innerHTML='';
      list.forEach(m=>{
        const el = document.createElement('div'); el.className='member-card';
        el.innerHTML = `
          <div class="member-image"><i class="fas fa-user"></i></div>
          <div style="flex:1">
            <strong>${escapeHtml(m.name)}</strong><div style="color:var(--primary)">${escapeHtml(m.role)}</div>
            <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
              <a class="icon" href="mailto:${encodeURIComponent(m.email||'')}"><i class="fas fa-envelope"></i></a>
              <a class="icon" href="#" data-phone="${m.phone||''}" onclick="handlePhoneClick(event,this)"><i class="fas fa-phone"></i></a>
            </div>
          </div>`;
        container.appendChild(el);
      })
    }

    // ---------- admin actions ----------
    function isAdmin(){ return localStorage.getItem(LS_SESSION) === 'true' }

    function openModal(html){ $('#modal').classList.add('show'); $('#modalCard').innerHTML = html }
    function closeModal(){ $('#modal').classList.remove('show'); $('#modalCard').innerHTML = '' }

    // show login form
    function showLogin(){
      openModal(`<h3>Login Admin</h3>
        <div class="form-row"><input id="loginId" placeholder="ID admin"></div>
        <div class="form-row"><input id="loginPw" type="password" placeholder="Password"></div>
        <div style="display:flex;gap:10px;justify-content:flex-end"><button class="btn" onclick="doLogin()">Masuk</button> <button class="btn danger" onclick="closeModal()">Tutup</button></div>
      `)
      $('#loginId').value = '';
    }

    function doLogin(){
      const id = $('#loginId').value.trim(); const pw = $('#loginPw').value.trim();
      if(id === ADMIN_ID && pw === ADMIN_PW){
        localStorage.setItem(LS_SESSION,'true'); closeModal(); renderAdminUI(); alert('Login berhasil sebagai '+id);
      } else { alert('ID atau password salah') }
    }

    function logout(){ localStorage.removeItem(LS_SESSION); renderAdminUI(); alert('Anda telah logout') }

    function renderAdminUI(){
      // change admin button text based on session
      const btn = $('#adminBtn'); btn.innerHTML = isAdmin() ? '<i class="fas fa-user-cog"></i> Admin (Terbuka)' : '<i class="fas fa-user-cog"></i> Admin';
      if(isAdmin()){
        btn.style.background = '#2c7a4a';
      } else btn.style.background='var(--primary)';

      // re-render news (admin controls are shown inside renderNews)
      renderNews(); renderMembers();
    }

    function openAdminPanel(){
      if(!isAdmin()) return showLogin();
      const html = `
        <h3>Panel Admin</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn" onclick="showAddNews()">Tambah Berita</button>
          <button class="btn" onclick="showManageNews()">Kelola Berita</button>
          <button class="btn" onclick="showManageMembers()">Kelola Pengurus</button>
          <button class="btn danger" onclick="logout()">Logout</button>
        </div>
        <div id="adminArea" style="margin-top:12px"></div>
      `;
      openModal(html);
    }

    // ---------- news CRUD UI ----------
    function showAddNews(){
      const html = `
        <h4>Tambah Berita</h4>
        <div class="form-row"><input id="n_title" placeholder="Judul"></div>
        <div class="form-row"><input id="n_date" placeholder="Tanggal (misal: 25 Oktober 2025)"></div>
        <div class="form-row"><input id="n_image" placeholder="Nama file gambar (contoh: 111.png)"></div>
        <div class="form-row"><textarea id="n_excerpt" placeholder="Isi singkat" rows="6"></textarea></div>
        <div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn" onclick="addNews()">Simpan</button> <button class="btn danger" onclick="closeModal()">Tutup</button></div>
      `;
      $('#adminArea').innerHTML = html;
    }

    function addNews(){
      const title = $('#n_title').value.trim(); const date = $('#n_date').value.trim(); const excerpt = $('#n_excerpt').value.trim(); const image = $('#n_image').value.trim();
      if(!title) return alert('Judul harus diisi');
      const arr = loadNews(); arr.unshift({id:cryptoRandomId(),title,date,excerpt,image}); saveNews(arr); alert('Berita ditambahkan'); $('#adminArea').innerHTML = '';
    }

    function showManageNews(){
      const list = loadNews();
      let html = '<h4>Kelola Berita</h4>';
      if(list.length===0) html += '<div>Tidak ada berita</div>'
      list.forEach(n=>{
        html += `<div style="border:1px solid #eee;padding:8px;border-radius:6px;margin-bottom:8px">
          <strong>${escapeHtml(n.title)}</strong><div style="color:#666">${escapeHtml(n.date||'')}</div>
          <div style="margin-top:8px;display:flex;gap:8px"><button class="btn" onclick="openEditNews('${n.id}')">Edit</button><button class="btn danger" onclick="deleteNews('${n.id}')">Hapus</button></div>
        </div>`
      })
      $('#adminArea').innerHTML = html;
    }

    function openEditNews(id){
      const list = loadNews(); const n = list.find(x=>x.id===id); if(!n) return alert('Berita tidak ditemukan');
      const html = `
        <h4>Edit Berita</h4>
        <div class="form-row"><input id="e_title" value="${escapeAttr(n.title)}"></div>
        <div class="form-row"><input id="e_date" value="${escapeAttr(n.date||'')}"></div>
        <div class="form-row"><input id="e_image" value="${escapeAttr(n.image||'')}"></div>
        <div class="form-row"><textarea id="e_excerpt" rows="6">${escapeAttr(n.excerpt||'')}</textarea></div>
        <div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn" onclick="saveEditNews('${n.id}')">Simpan</button> <button class="btn danger" onclick="closeModal()">Tutup</button></div>
      `;
      $('#adminArea').innerHTML = html;
    }

    function saveEditNews(id){
      const list = loadNews(); const idx = list.findIndex(x=>x.id===id); if(idx===-1) return alert('Berita tidak ditemukan');
      list[idx].title = $('#e_title').value.trim(); list[idx].date = $('#e_date').value.trim(); list[idx].image = $('#e_image').value.trim(); list[idx].excerpt = $('#e_excerpt').value.trim();
      saveNews(list); alert('Perubahan tersimpan');
    }

    function deleteNews(id){ if(!confirm('Hapus berita ini?')) return; const list = loadNews().filter(x=>x.id!==id); saveNews(list); alert('Berita dihapus'); }

    // ---------- members management ----------
    function showManageMembers(){
      const list = loadMembers();
      let html = '<h4>Kelola Pengurus</h4>';
      html += `<div style="margin-bottom:8px"><button class="btn" onclick="showAddMember()">Tambah Pengurus</button></div>`
      list.forEach(m=>{
        html += `<div style="border:1px solid #eee;padding:8px;border-radius:6px;margin-bottom:8px">
          <strong>${escapeHtml(m.name)}</strong> <div style="color:#666">${escapeHtml(m.role)}</div>
          <div style="margin-top:8px;display:flex;gap:8px"><button class="btn" onclick="openEditMember('${m.id}')">Edit</button><button class="btn danger" onclick="deleteMember('${m.id}')">Hapus</button></div>
        </div>`
      })
      $('#adminArea').innerHTML = html;
    }

    function showAddMember(){
      $('#adminArea').innerHTML = `
        <h4>Tambah Pengurus</h4>
        <div class="form-row"><input id="m_name" placeholder="Nama"></div>
        <div class="form-row"><input id="m_role" placeholder="Jabatan"></div>
        <div class="form-row"><input id="m_email" placeholder="Email (opsional)"></div>
        <div class="form-row"><input id="m_phone" placeholder="No. HP (untuk WhatsApp), contoh: 628123456789"></div>
        <div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn" onclick="addMember()">Simpan</button> <button class="btn danger" onclick="closeModal()">Tutup</button></div>
      `;
    }

    function addMember(){
      const name = $('#m_name').value.trim(); const role = $('#m_role').value.trim(); const email = $('#m_email').value.trim(); const phone = $('#m_phone').value.trim();
      if(!name||!role) return alert('Nama dan jabatan harus diisi');
      const arr = loadMembers(); arr.push({id:cryptoRandomId(),name,role,email,phone}); saveMembers(arr); alert('Pengurus ditambahkan'); $('#adminArea').innerHTML = '';
    }

    function openEditMember(id){ const arr = loadMembers(); const m = arr.find(x=>x.id===id); if(!m) return alert('Pengurus tidak ditemukan');
      $('#adminArea').innerHTML = `
        <h4>Edit Pengurus</h4>
        <div class="form-row"><input id="em_name" value="${escapeAttr(m.name)}"></div>
        <div class="form-row"><input id="em_role" value="${escapeAttr(m.role)}"></div>
        <div class="form-row"><input id="em_email" value="${escapeAttr(m.email||'')}"></div>
        <div class="form-row"><input id="em_phone" value="${escapeAttr(m.phone||'')}"></div>
        <div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn" onclick="saveEditMember('${m.id}')">Simpan</button> <button class="btn danger" onclick="closeModal()">Tutup</button></div>
      ` }

    function saveEditMember(id){ const arr = loadMembers(); const idx = arr.findIndex(x=>x.id===id); if(idx===-1) return alert('Pengurus tidak ditemukan');
      arr[idx].name = $('#em_name').value.trim(); arr[idx].role = $('#em_role').value.trim(); arr[idx].email = $('#em_email').value.trim(); arr[idx].phone = $('#em_phone').value.trim(); saveMembers(arr); alert('Perubahan tersimpan'); }

    function deleteMember(id){ if(!confirm('Hapus pengurus ini?')) return; const arr = loadMembers().filter(x=>x.id!==id); saveMembers(arr); alert('Pengurus dihapus'); }

    // ---------- phone behavior ----------
    function handlePhoneClick(e, anchor){ e.preventDefault(); const phone = anchor.dataset.phone || ''; if(phone && phone.trim()!==""){
      openWhatsApp(phone);
    } else {
      const p = prompt('Masukkan nomor WhatsApp (format internasional tanpa +, contoh: 628123456789):'); if(!p) return; // store to that anchor's dataset and also save to members
      anchor.dataset.phone = p; // update storage: find member by matching name in DOM
      // attempt to find member by traversing DOM
      const card = anchor.closest('.member-card'); if(card){ const name = card.querySelector('strong').innerText; const arr = loadMembers(); const m = arr.find(x=>x.name===name); if(m){ m.phone = p; saveMembers(arr); } }
      openWhatsApp(p);
    }}

    function openWhatsApp(phone){ // open in new tab
      // sanitize phone: remove non-digits
      const digits = phone.replace(/[^0-9]/g,''); if(!digits) return alert('Nomor tidak valid');
      const url = `https://wa.me/${digits}`;
      window.open(url,'_blank');
    }

    // ---------- small utils ----------
    function escapeHtml(s){ if(!s) return ''; return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;') }
    function escapeAttr(s){ if(!s) return ''; return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;') }

    // ---------- init ----------
    document.getElementById('adminBtn').addEventListener('click', openAdminPanel);
    document.getElementById('modal').addEventListener('click', (e)=>{ if(e.target.id==='modal') closeModal(); });

    // initialise storage and render
    if(!localStorage.getItem(LS_NEWS_KEY)) localStorage.setItem(LS_NEWS_KEY, JSON.stringify(defaultNews));
    if(!localStorage.getItem(LS_MEM_KEY)) localStorage.setItem(LS_MEM_KEY, JSON.stringify(defaultMembers));

    renderAdminUI();

    // expose some functions globally needed by inline onclick attributes
    window.openEditNews = openEditNews; window.deleteNews = deleteNews; window.handlePhoneClick = handlePhoneClick; window.addNews = addNews; window.saveEditNews = saveEditNews; window.showAddNews = showAddNews; window.showManageNews = showManageNews; window.showManageMembers = showManageMembers; window.addMember = addMember; window.openWhatsApp = openWhatsApp; window.openAdminPanel = openAdminPanel; window.showLogin = showLogin; window.logout = logout;
  </script>
</body>
</html>
